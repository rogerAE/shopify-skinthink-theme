{% schema %}
{
  "name": "Advanced Custom Banner",
  "settings": [
    {
      "type": "image_picker",
      "id": "desktop_image",
      "label": "Desktop Background Image"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "Mobile Background Image"
    },
    {
      "type": "range",
      "id": "mobile_image_height",
      "label": "Mobile Image Max Height (px)",
      "min": 200,
      "max": 800,
      "step": 10,
      "default": 500
    },

    {
      "type": "richtext",
      "id": "top_left_text",
      "label": "Text Block 2 (Top Text)"
    },
    {
      "type": "color",
      "id": "top_left_text_color",
      "label": "Text 2 Color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "top_left_text_size",
      "label": "Text 2 Font Size (px)",
      "min": 10,
      "max": 48,
      "step": 1,
      "default": 18
    },
    {
      "type": "range",
      "id": "top_left_offset_top",
      "label": "Text 2 Top Offset (%)",
      "min": 0,
      "max": 90,
      "step": 1,
      "default": 2
    },
    {
      "type": "range",
      "id": "top_left_offset_left",
      "label": "Text 2 Left Offset (%)",
      "min": 0,
      "max": 90,
      "step": 1,
      "default": 2
    },

    {
      "type": "text",
      "id": "heading",
      "label": "Main Heading"
    },
    {
      "type": "range",
      "id": "heading_size",
      "label": "Main Heading Font Size (px)",
      "min": 10,
      "max": 70,
      "step": 1,
      "default": 36
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "range",
      "id": "subheading_size",
      "label": "Subheading Font Size (px)",
      "min": 10,
      "max": 36,
      "step": 1,
      "default": 18
    },
    {
      "type": "text",
      "id": "price_text",
      "label": "Price Text"
    },
    {
      "type": "range",
      "id": "price_size",
      "label": "Price Font Size (px)",
      "min": 10,
      "max": 32,
      "step": 1,
      "default": 16
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Rich Text Description"
    },
    {
      "type": "range",
      "id": "description_size",
      "label": "Description Font Size (px)",
      "min": 10,
      "max": 28,
      "step": 1,
      "default": 16
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    },
    {
      "type": "range",
      "id": "button_size",
      "label": "Button Font Size (px)",
      "min": 10,
      "max": 24,
      "step": 1,
      "default": 14
    },

    {
      "type": "color",
      "id": "text1_color",
      "label": "Text 1 Color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "text1_width_desktop",
      "label": "Text 1 Width % (Desktop)",
      "min": 30,
      "max": 100,
      "step": 1,
      "default": 50
    },
    {
      "type": "range",
      "id": "text1_width_mobile",
      "label": "Text 1 Width % (Mobile)",
      "min": 30,
      "max": 100,
      "step": 1,
      "default": 90
    },
    {
      "type": "select",
      "id": "text1_position_desktop",
      "label": "Text 1 Position (Desktop)",
      "options": [
        { "value": "top-left", "label": "Top Left" },
        { "value": "top-center", "label": "Top Center" },
        { "value": "top-right", "label": "Top Right" },
        { "value": "center-left", "label": "Center Left" },
        { "value": "center", "label": "Center Middle" },
        { "value": "center-right", "label": "Center Right" },
        { "value": "bottom-left", "label": "Bottom Left" },
        { "value": "bottom-center", "label": "Bottom Center" },
        { "value": "bottom-right", "label": "Bottom Right" }
      ],
      "default": "center-right"
    },
    {
      "type": "select",
      "id": "text1_position_mobile",
      "label": "Text 1 Position (Mobile)",
      "options": [
        { "value": "top-left", "label": "Top Left" },
        { "value": "top-center", "label": "Top Center" },
        { "value": "top-right", "label": "Top Right" },
        { "value": "center-left", "label": "Center Left" },
        { "value": "center", "label": "Center Middle" },
        { "value": "center-right", "label": "Center Right" },
        { "value": "bottom-left", "label": "Bottom Left" },
        { "value": "bottom-center", "label": "Bottom Center" },
        { "value": "bottom-right", "label": "Bottom Right" }
      ],
      "default": "bottom-center"
    }
  ],
  "presets": [{ "name": "Advanced Custom Banner" }]
}
{% endschema %}

<div class="advanced-banner">
  <div class="banner-image-wrapper">
    <picture>
      <source media="(max-width: 767px)" srcset="{{ section.settings.mobile_image | image_url }}">
      <img src="{{ section.settings.desktop_image | image_url }}" alt="Banner" class="banner-img" />
    </picture>
  </div>

  <div class="banner-content">

    <!-- Text Block 2 -->
    <div 
      class="text-block-2"
      style="
        color: {{ section.settings.top_left_text_color }};
        font-size: {{ section.settings.top_left_text_size }}px;
        top: {{ section.settings.top_left_offset_top }}%;
        left: {{ section.settings.top_left_offset_left }}%;
        transform: translate(0, 0);
      ">
      {{ section.settings.top_left_text }}
    </div>

    <!-- Text Block 1 -->
    <div 
      class="text-block-1 text1-{{ section.settings.text1_position_desktop }} text1-mobile-{{ section.settings.text1_position_mobile }}"
      style="color: {{ section.settings.text1_color }}; width: {{ section.settings.text1_width_desktop }}%;">
      {% if section.settings.heading %}
        <h2 style="font-size: {{ section.settings.heading_size }}px;">{{ section.settings.heading }}</h2>
      {% endif %}
      {% if section.settings.subheading %}
        <p style="font-size: {{ section.settings.subheading_size }}px;">{{ section.settings.subheading }}</p>
      {% endif %}
      {% if section.settings.price_text %}
        <p style="font-size: {{ section.settings.price_size }}px; margin: 10px 0;">{{ section.settings.price_text }}</p>
      {% endif %}
      {% if section.settings.description %}
        <div style="font-size: {{ section.settings.description_size }}px;">{{ section.settings.description }}</div>
      {% endif %}
      {% if section.settings.button_label and section.settings.button_link %}
        <a href="{{ section.settings.button_link }}" class="btn" style="font-size: {{ section.settings.button_size }}px;">
          {{ section.settings.button_label }}
        </a>
      {% endif %}
    </div>
  </div>
</div>

<style>
.advanced-banner {
  position: relative;
  width: 100%;
  overflow: hidden;
}
.banner-image-wrapper {
  width: 100%;
}
.banner-img {
  display: block;
  width: 100%;
  height: auto;
}
@media (max-width: 767px) {
  .banner-image-wrapper {
    height: {{ section.settings.mobile_image_height }}px;
    overflow: hidden;
    position: relative;
  }
  .banner-img {
    height: 100%;
    object-fit: cover;
  }
}
.banner-content {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}
.text-block-1, .text-block-2 {
  position: absolute;
  padding: 1rem;
  text-align: center;
  pointer-events: all;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Desktop Positions */
.text1-top-left      { top: 5%; left: 5%; transform: translateY(0); }
.text1-top-center    { top: 5%; left: 50%; transform: translateX(-50%); }
.text1-top-right     { top: 5%; right: 5%; transform: translateY(0); }
.text1-center-left   { top: 50%; left: 5%; transform: translateY(-50%); }
.text1-center        { top: 50%; left: 50%; transform: translate(-50%, -50%); }
.text1-center-right  { top: 50%; right: 5%; transform: translateY(-50%); }
.text1-bottom-left   { bottom: 5%; left: 5%; transform: translateY(0); }
.text1-bottom-center { bottom: 5%; left: 50%; transform: translateX(-50%); }
.text1-bottom-right  { bottom: 5%; right: 5%; transform: translateY(0); }

/* Mobile Overrides */
@media screen and (max-width: 767px) {
  .text1-mobile-top-left      { top: 5% !important; left: 5% !important; transform: none !important; width: {{ section.settings.text1_width_mobile }}% !important; }
  .text1-mobile-top-center    { top: 5% !important; left: 50% !important; transform: translateX(-50%) !important; width: {{ section.settings.text1_width_mobile }}% !important; }
  .text1-mobile-top-right     { top: 5% !important; right: 5% !important; transform: none !important; width: {{ section.settings.text1_width_mobile }}% !important; }
  .text1-mobile-center        { top: 50% !important; left: 50% !important; transform: translate(-50%, -50%) !important; width: {{ section.settings.text1_width_mobile }}% !important; }
  .text1-mobile-bottom-center { bottom: 5% !important; left: 50% !important; transform: translateX(-50%) !important; width: {{ section.settings.text1_width_mobile }}% !important; }
  .text1-mobile-bottom-left   { bottom: 5% !important; left: 5% !important; width: {{ section.settings.text1_width_mobile }}% !important; }
  .text1-mobile-bottom-right  { bottom: 5% !important; right: 5% !important; width: {{ section.settings.text1_width_mobile }}% !important; }
}

.btn {
  margin-top: 1rem;
  display: inline-block;
  padding: 0.75rem 1.5rem;
  background: black;
  color: white;
  text-decoration: none;
  font-weight: normal;
}
</style>
